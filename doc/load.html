<!DOCTYPE html>  <html> <head>   <title>load.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="icon" type="image/x-icon" href="http://spinnychair.co.cc/img/favicon.ico">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="aiscripts.html">                 aiscripts.coffee               </a>                                           <a class="source" href="audio.html">                 audio.coffee               </a>                                           <a class="source" href="cutscene.html">                 cutscene.coffee               </a>                                           <a class="source" href="engine.html">                 engine.coffee               </a>                                           <a class="source" href="format.html">                 format.coffee               </a>                                           <a class="source" href="load.html">                 load.coffee               </a>                                           <a class="source" href="pause.html">                 pause.coffee               </a>                                           <a class="source" href="save.html">                 save.coffee               </a>                                           <a class="source" href="scene.html">                 scene.coffee               </a>                                           <a class="source" href="scenenode.html">                 scenenode.coffee               </a>                                           <a class="source" href="sound.html">                 sound.coffee               </a>                                           <a class="source" href="sprite.html">                 sprite.coffee               </a>                                           <a class="source" href="surface.html">                 surface.coffee               </a>                                           <a class="source" href="sysinf.html">                 sysinf.coffee               </a>                                           <a class="source" href="tile.html">                 tile.coffee               </a>                                           <a class="source" href="unit.html">                 unit.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <a id="ribbon" href="https://github.com/DarthFennec"><img src="http://spinnychair.co.cc/img/forkme.png" /></a>             <h1>               load.coffee             </h1>           </th>           <th class="code">             <h1>               <a id="title" href="http://spinnychair.co.cc">Spinny Chair</a>             </h1>           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><strong>The loading screen.</strong></p>

<p>In a non-blocking loading environment such as a web browser, a resource
might potentially be used before it's fully loaded. This class attempts
to counteract this problem. <br />
External resources should be added to the list, and should be set to remove
themselves from the list once they finish loading. This layer blocks the
stack while objects remain in the list, and displays a progress bar showing
the number of resources already loaded out of the total number of resources.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">loader</span>
  <span class="nv">constructor: </span><span class="o">-&gt;</span>
    <span class="vi">@loadcount = </span><span class="p">[]</span>
    <span class="vi">@maxload = </span><span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Draw a loading bar on the screen. <br />
Block if something is being loaded.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">render: </span><span class="nf">(buffer) -&gt;</span>
    <span class="k">if</span> <span class="nx">@loadcount</span><span class="p">.</span><span class="nx">length</span> <span class="o">isnt</span> <span class="mi">0</span>
      <span class="vi">@maxload = </span><span class="nx">@loadcount</span><span class="p">.</span><span class="nx">length</span> <span class="k">if</span> <span class="nx">@maxload</span> <span class="o">&lt;</span> <span class="nx">@loadcount</span><span class="p">.</span><span class="nx">length</span>
      <span class="nv">loadwidth = </span><span class="p">(</span><span class="nx">@maxload</span> <span class="o">-</span> <span class="nx">@loadcount</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">dims</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="mi">60</span><span class="p">)</span><span class="o">/</span><span class="nx">@maxload</span>
      <span class="nx">buffer</span><span class="p">.</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">()</span>
      <span class="nx">buffer</span><span class="p">.</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span> <span class="mi">30</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">dims</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">30</span>
      <span class="nx">buffer</span><span class="p">.</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span> <span class="nx">loadwidth</span> <span class="o">+</span> <span class="mi">30</span><span class="p">,</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">dims</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">30</span>
      <span class="nx">buffer</span><span class="p">.</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">()</span>
    <span class="k">else</span> <span class="vi">@maxload = </span><span class="mi">0</span>
    <span class="nx">@loadcount</span><span class="p">.</span><span class="nx">length</span> <span class="o">isnt</span> <span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Block if something is being loaded.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">input: </span><span class="nf">(keys) -&gt;</span> <span class="nx">@loadcount</span><span class="p">.</span><span class="nx">length</span> <span class="o">isnt</span> <span class="mi">0</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 